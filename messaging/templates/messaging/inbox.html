{% extends 'base.html' %}
{% block title %}Inbox | 3D Print Marketplace{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <h1 class="card-title mb-3">Inbox</h1>
      <ul class="list-group mb-0">
        {% for thread in threads %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <a href="{% url 'messaging:thread_detail' thread.id %}" class="fw-bold">
              {% for user in thread.participants.all %}
                {% if user != request.user %}{{ user.username }}{% endif %}
              {% endfor %}
            </a>
            {% with unread=thread_unread_counts.thread.id %}
              <span class="badge bg-primary">{{ unread|default:0 }} new</span>
            {% endwith %}
          </li>
        {% empty %}
          <li class="list-group-item"><div class="alert alert-info mb-0 w-100">No messages yet.</div></li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
