{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% block title %}Home Craft 3d{% endblock %}</title>

  <!-- App Icons -->
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/homecraft3d_icon_16.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/homecraft3d_icon_32.png' %}">
  <link rel="icon" type="image/png" sizes="64x64" href="{% static 'images/homecraft3d_icon_64.png' %}">
  <link rel="icon" type="image/png" sizes="192x192" href="{% static 'images/homecraft3d_icon_192.png' %}">
  <link rel="icon" type="image/png" sizes="512x512" href="{% static 'images/homecraft3d_icon_512.png' %}">
  <!-- If you have a true 180x180, use it here -->
  <link rel="apple-touch-icon" sizes="192x192" href="{% static 'images/homecraft3d_icon_192.png' %}">
  <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">

  <!-- Social Sharing Meta (prefer absolute URLs via SITE_URL / request) -->
  <meta property="og:image" content="{% static 'images/Logo.png' %}">
  <meta name="twitter:image" content="{% static 'images/Logo.png' %}">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/custom_theme.css' %}">

  {% block extra_head %}{% endblock %}
</head>

{% with theme_mode=theme_mode|default:'auto' %}
<body class="theme-{{ theme_mode }}">
  {% if SHOW_PROMO_BANNER %}
    {% include 'includes/promo_banner.html' %}
  {% endif %}

  {% block navbar %}
    {% include 'includes/navbar.html' %}
  {% endblock %}

  <div class="container-fluid">
    <div class="row">
      <aside class="col-md-2 d-none d-md-block border-end py-4 app-sidebar">
        {% block sidebar %}
          {% include 'includes/sidebar.html' %}
        {% endblock %}
      </aside>

      <main class="col-12 col-md-10 py-4">
        {% block content %}{% endblock %}
      </main>
    </div>
  </div>

  {% block footer %}
    {% include 'includes/footer.html' %}
  {% endblock %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Use ONE Chart.js source; rename your init file if needed -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  {# <script src="{% static 'js/charts-init.js' %}"></script> #}

  {% if RECAPTCHA_PUBLIC_KEY %}
    <script src="https://www.google.com/recaptcha/api.js?render={{ RECAPTCHA_PUBLIC_KEY }}"></script>
  {% endif %}

  <!-- Cookie Consent Banner -->
  <div id="cookieConsentBanner" class="fixed-bottom bg-dark text-light p-3 shadow-lg" style="display:none;z-index:9999;">
    <div class="container d-flex justify-content-between align-items-center">
      <span>
        This site uses cookies and similar technologies to enhance your experience.
        <a href="/legal/privacy/" class="text-info text-decoration-underline" target="_blank" rel="noopener">Privacy Policy</a>.
      </span>
      <button id="cookieConsentBtn" class="btn btn-success btn-sm ms-3">Accept</button>
    </div>
  </div>

  <script>
    const banner = document.getElementById('cookieConsentBanner');
    const btn = document.getElementById('cookieConsentBtn');

    if (!localStorage.getItem('cookieConsentAccepted')) {
      banner.style.display = 'block';
    }

    btn.addEventListener('click', () => {
      localStorage.setItem('cookieConsentAccepted', 'true');
      banner.style.display = 'none';
    });
  </script>

  {% block extra_scripts %}{% endblock %}
</body>
{% endwith %}
</html>
